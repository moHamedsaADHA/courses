# دليل إعداد Brevo للبريد الإلكتروني

## مقدمة

هذا الدليل سيساعدك على إعداد حساب Brevo لضمان وصول رسائل البريد الإلكتروني بشكل موثوق، وخاصة رسائل OTP التي تحتاجها لتفعيل المستخدمين.

## خطوات الإعداد

### 1. إنشاء حساب Brevo

1. انتقل إلى [موقع Brevo](https://www.brevo.com/) وقم بإنشاء حساب جديد
2. استخدم بريدك الإلكتروني الحقيقي (يُفضل Gmail) للتسجيل
3. أكمل عملية التسجيل وتأكد من تفعيل حسابك عبر رابط التفعيل الذي سيصلك

### 2. الحصول على بيانات SMTP

1. في لوحة التحكم Brevo، انتقل إلى "SMTP & API" من قائمة "Transactional"
2. احصل على معلومات SMTP التالية:
   - SMTP Server: smtp-relay.brevo.com
   - Port: 587
   - Login: [بريدك الإلكتروني المتحقق]
   - SMTP Key: [سيتم إنشاؤه في لوحة التحكم]
3. انسخ هذه البيانات إلى ملف `.env` الخاص بك

### 3. إضافة وتحقق من البريد الإلكتروني المرسل

1. في لوحة التحكم Brevo، انتقل إلى "Senders & IPs" (المرسلون وعناوين IP)
2. اختر "Add a Sender" (إضافة مرسل)
3. قم بإدخال بريدك الإلكتروني الشخصي واسمك
4. اتبع خطوات التحقق عبر رابط التفعيل الذي سيصلك

> **ملاحظة مهمة**: إذا كنت تريد استخدام نطاق خاص (مثل coursesplatform.com)، ستحتاج إلى إعداد سجلات DNS إضافية (SPF, DKIM, DMARC) لتحسين وصول البريد الإلكتروني.

### 4. تحديث ملف .env

قم بتحديث ملف `.env` بالمعلومات الحقيقية:

```
BREVO_API_KEY=your-api-key-here
BREVO_SMTP_HOST=smtp-relay.brevo.com
BREVO_SMTP_PORT=587
BREVO_SMTP_USER=your-verified-email@example.com
BREVO_SMTP_PASS=your-smtp-key-here
EMAIL_FROM=your-verified-email@example.com
EMAIL_FROM_NAME=منصة الكورسات
```

### 5. اختبار إرسال البريد الإلكتروني

بعد تكوين بيانات الاعتماد والتحقق من بريدك:

1. قم بتشغيل سكريبت الاختبار للتحقق من تسليم البريد الإلكتروني
2. تحقق من وصول البريد إلى صندوق الوارد الخاص بك
3. تحقق من مجلدات البريد غير المرغوب فيه إذا لم تر البريد

## حل مشاكل وصول البريد الإلكتروني

### 1. التحقق من مجلد البريد غير المرغوب فيه (Spam)

- عند اختبار النظام، تحقق دائمًا من مجلد البريد غير المرغوب فيه
- أضف المرسل إلى قائمة المرسلين الموثوقين في حسابك البريدي

### 2. تحقق من سجلات الإرسال في Brevo

- في لوحة تحكم Brevo، يمكنك مراجعة سجلات الإرسال لمعرفة حالة كل بريد
- تحقق من "Statistics" و "Logs" للاطلاع على تفاصيل الإرسال

### 3. تجربة خدمات بريد مختلفة

- في بعض الأحيان يكون لدى Gmail فلاتر أكثر صرامة
- جرب استخدام حسابات بريد من مزودين آخرين مثل Outlook أو Yahoo

### 4. تشغيل سكريبت الاختبار

```
node test-email-service.js your-email@example.com
```

## قيود حجم البريد الإلكتروني

انتبه لحدود الإرسال في Brevo:
- الخطة المجانية: 300 رسالة في اليوم
- الخطة الأساسية: حدود متنوعة حسب الاشتراك
- خطة الأعمال: أحجام إرسال أعلى

إذا كنت بحاجة إلى حجم أكبر، فكر في ترقية خطة Brevo الخاصة بك.