# Course Platform - OTP Verification System

## ๐ง ูุธุงู ุงูุชุญูู ูู OTP 

ุชู ุฅุถุงูุฉ ูุธุงู ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุจุงุณุชุฎุฏุงู ุฑูุฒ OTP ุฅูู ููุตุฉ ุงูููุฑุณุงุช ุจุงุณุชุฎุฏุงู ุฎุฏูุฉ Brevo.

## โจ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

- **ุชุณุฌูู ุงูุญุณุงุจ ูุน OTP**: ุนูุฏ ุงูุชุณุฌููุ ูุชู ุฅุฑุณุงู ุฑูุฒ ุชุญูู ูููู ูู 6 ุฃุฑูุงู
- **ุงูุชุญูู ูู OTP**: ุงูุชุญูู ูู ุงูุฑูุฒ ูุชูุนูู ุงูุญุณุงุจ
- **ุฅุนุงุฏุฉ ุฅุฑุณุงู OTP**: ุฅููุงููุฉ ุทูุจ ุฑูุฒ ุฌุฏูุฏ ูู ุญุงูุฉ ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฑูุฒ
- **ูุงูุจ ุจุฑูุฏ ุฅููุชุฑููู ุงุญุชุฑุงูู**: ุชุตููู ุนุฑุจู ุฌููู ููุชุฌุงูุจ
- **ุงูุญูุงูุฉ ุงูุฃูููุฉ**: ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฑูุฒ ุฎูุงู 15 ุฏูููุฉ

## ๐๏ธ ุงูุฅุนุฏุงุฏ ูุงูุชุซุจูุช

### 1. ุชุซุจูุช Dependencies ุงูุฌุฏูุฏุฉ

```bash
npm install node-fetch joi
```

### 2. ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ

ุฅูุดุฆ ููู `.env` ูุฃุถู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ:

```env
# Brevo Email Service Configuration
BREVO_API_KEY=your_brevo_api_key_here
BREVO_SENDER_EMAIL=noreply@yourdomain.com
BREVO_SENDER_NAME=Course Platform
```

### 3. ุงูุญุตูู ุนูู Brevo API Key

1. ุงุฐูุจ ุฅูู [Brevo](https://www.brevo.com/)
2. ุฅูุดุฆ ุญุณุงุจ ุฃู ูู ุจุชุณุฌูู ุงูุฏุฎูู
3. ุงุฐูุจ ุฅูู **SMTP & API** โ **API Keys**
4. ุฃูุดุฆ ููุชุงุญ API ุฌุฏูุฏ
5. ุงูุณุฎ ุงูููุชุงุญ ูุงุณุชุฎุฏูู ูู `BREVO_API_KEY`
6. ุชุฃูุฏ ูู ุฃู ุงูุจุฑูุฏ ุงููุณุชุฎุฏู ูู `BREVO_SENDER_EMAIL` ูุนุชูุฏ ูู ุญุณุงุจ Brevo

## ๐ก API Endpoints ุงูุฌุฏูุฏุฉ

### 1. ุชุณุฌูู ุญุณุงุจ ุฌุฏูุฏ
```http
POST /auth/users/
```

**Request Body:**
```json
{
  "name": "ูุญูุฏ ุฃุญูุฏ",
  "email": "user@example.com",
  "password": "password123",
  "role": "student",
  "phone": "01234567890"
}
```

**Response:**
```json
{
  "message": "ุชู ุฅูุดุงุก ุงูุญุณุงุจ ุจูุฌุงุญ. ูุฑุฌู ุงูุชุญูู ูู ุจุฑูุฏู ุงูุฅููุชุฑููู ูุชูุนูู ุงูุญุณุงุจ",
  "user": {...},
  "tempToken": "temporary_jwt_token",
  "requiresVerification": true
}
```

### 2. ุงูุชุญูู ูู OTP
```http
POST /auth/users/verify-otp
```

**Request Body:**
```json
{
  "email": "user@example.com",
  "otp": "123456"
}
```

**Response:**
```json
{
  "message": "ุชู ุชูุนูู ุงูุญุณุงุจ ุจูุฌุงุญ",
  "user": {...},
  "token": "permanent_jwt_token",
  "isVerified": true
}
```

### 3. ุฅุนุงุฏุฉ ุฅุฑุณุงู OTP
```http
POST /auth/users/resend-otp
```

**Request Body:**
```json
{
  "email": "user@example.com"
}
```

**Response:**
```json
{
  "message": "ุชู ุฅุฑุณุงู ุฑูุฒ ุชุญูู ุฌุฏูุฏ ุฅูู ุจุฑูุฏู ุงูุฅููุชุฑููู"
}
```

## ๐๏ธ ุงูุชุบููุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุชู ุฅุถุงูุฉ ุงูุญููู ุงูุชุงููุฉ ุฅูู ููุฏู User:

```javascript
{
  isVerified: {
    type: Boolean,
    default: false
  },
  otp: {
    type: String
  },
  otpExpires: {
    type: Date
  }
}
```

## ๐ ุงูุญูุงูุฉ ูุงูุฃูุงู

- **ุงูุชูุงุก ุตูุงุญูุฉ OTP**: ุงูุฑูุฒ ุตุงูุญ ููุฏุฉ 15 ุฏูููุฉ ููุท
- **ุงูุชุญูู ูู ุงูุชูุนูู**: middleware ูููุน ุงููุตูู ููุญุณุงุจุงุช ุบูุฑ ุงูููุนูุฉ
- **Validation ููู**: ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ุงููุฑุณูุฉ
- **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ

## ๐จ ูุงูุจ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

- ุชุตููู ุนุฑุจู ูุชุฌุงูุจ
- ุฃููุงู ุงุญุชุฑุงููุฉ
- ูุนูููุงุช ุฃูููุฉ ูููุฉ
- ุชุนูููุงุช ูุงุถุญุฉ ูููุณุชุฎุฏู

## ๐ ุณูุฑ ุงูุนูู

1. **ุงูุชุณุฌูู**: ุงููุณุชุฎุฏู ูุณุฌู ุญุณุงุจ ุฌุฏูุฏ
2. **ุฅุฑุณุงู OTP**: ูุชู ุฅุฑุณุงู ุฑูุฒ ุชุญูู ุฅูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
3. **ุงูุชุญูู**: ุงููุณุชุฎุฏู ูุฏุฎู ุงูุฑูุฒ ููุชูุนูู
4. **ุงูุชูุนูู**: ูุตุจุญ ุงูุญุณุงุจ ูุดุทุงู ููุญุตู ุนูู ุชููู ุฏุงุฆู

## ๐ ุงูุงุณุชุฎุฏุงู

1. ุชุฃูุฏ ูู ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุจุดูู ุตุญูุญ
2. ูู ุจุชุดุบูู ุงูุฎุงุฏู
3. ุงุณุชุฎุฏู endpoints ุงูุฌุฏูุฏุฉ ูุชุณุฌูู ุงููุณุชุฎุฏููู
4. ุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููุญุตูู ุนูู OTP
5. ูุนู ุงูุญุณุงุจ ุจุงุณุชุฎุฏุงู ุงูุฑูุฒ

## ๐ ููุงุญุธุงุช ูููุฉ

- ุชุฃูุฏ ูู ุฃู ุงูุฅูููู ุงููุฑุณู ูุนุชูุฏ ูู Brevo
- ุงูุฑูุฒ ุตุงูุญ ููุฏุฉ 15 ุฏูููุฉ ููุท
- ูููู ุฅุนุงุฏุฉ ุฅุฑุณุงู ุฑูุฒ ุฌุฏูุฏ ุฅุฐุง ุงูุชูุช ุงูุตูุงุญูุฉ
- ุงูุชููู ุงููุคูุช ูุชู ุงุณุชุจุฏุงูู ุจุชููู ุฏุงุฆู ุจุนุฏ ุงูุชูุนูู